### **13.3 Hata loglama teknikleri**

Bir uygulamada hata oluÅŸtuÄŸunda sadece yakalamak yetmez â€” **ne zaman, nerede ve neden oluÅŸtuÄŸunu** da bilmek gerekir. Bu iÅŸleme **hata loglama (error logging)** denir.

**ğŸ”¹ 1. Konsola YazdÄ±rmak (GeliÅŸtirici ortamÄ± iÃ§in)**

En temel yÃ¶ntem `console` fonksiyonlarÄ±dÄ±r:

```jsx
try {
  // hata oluÅŸturabilecek kod
} catch (err) {
  console.error("Hata yakalandÄ±:", err);
}
```

ğŸ”¸ DiÄŸer console metotlarÄ±:

- `console.log()` â†’ genel bilgi
- `console.warn()` â†’ uyarÄ±lar
- `console.error()` â†’ hata mesajlarÄ±
- `console.trace()` â†’ hata nerede oluÅŸtu, adÄ±m adÄ±m gÃ¶sterir

---

**ğŸ”¹ 2. `err.message` ve `err.stack` ile detay alma**

```jsx
catch (err) {
  console.log("Mesaj:", err.message);
  console.log("Detay:", err.stack);
}
```

- `message`: HatanÄ±n kÄ±sa Ã¶zeti
- `stack`: HatanÄ±n oluÅŸtuÄŸu yerin izini verir (debug iÃ§in Ã§ok deÄŸerli)

---

**ğŸ”¹ 3. HatalarÄ± Sunucuya GÃ¶ndermek**

GerÃ§ek uygulamalarda hatalar sadece tarayÄ±cÄ±da kalmaz. Genelde bir **API Ã¼zerinden backend'e gÃ¶nderilir.** Ã‡Ã¼nkÃ¼ bu hatalarÄ± **sadece kullanÄ±cÄ± fark eder** ama geliÅŸtirici **gÃ¶rmez**. Uygulamada bir sorun olduÄŸunda, o hatayÄ± yakalayabilmek iÃ§in geliÅŸtiricinin bu hatadan haberdar olmasÄ± gerekir.

Ä°ÅŸte bu yÃ¼zden, oluÅŸan hatalar genellikle bir **API aracÄ±lÄ±ÄŸÄ±yla backend sunucuya gÃ¶nderilir**. BÃ¶ylece:

- GeliÅŸtirici, hangi kullanÄ±cÄ±da, ne zaman, hangi sayfada hata oluÅŸtuÄŸunu gÃ¶rebilir.
- Uygulama canlÄ±dayken oluÅŸan hatalarÄ± **anlÄ±k takip etmek ve dÃ¼zeltmek** mÃ¼mkÃ¼n olur.
- TÃ¼m hatalar bir veri tabanÄ±nda ya da hata takip sisteminde (Ã¶rneÄŸin Sentry, LogRocket) **kayÄ±t altÄ±na alÄ±nÄ±r**.
- KullanÄ±cÄ± deneyimi bozulduÄŸunda hÄ±zlÄ±ca mÃ¼dahale edilebilir.

```jsx
catch (err) {
  fetch("/log-error", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      message: err.message,
      stack: err.stack,
      zaman: new Date().toISOString(),
    }),
  });
}
```

ğŸ”¸ Bu, hata takip sistemlerinde (Ã¶rn: Sentry, LogRocket, Bugsnag) yaygÄ±n bir yaklaÅŸÄ±mdÄ±r.

**Mesela Sentry kullanÄ±yoruz diyelim, o zaman nasÄ±l olacak? GÃ¶steriyim:**

EÄŸer Sentry kullanacaksan, `fetch` yerine Sentry'nin kendi API'sini kullanÄ±rsÄ±n. Ã–nce Sentry'yi projene kurmalÄ±sÄ±n:

1. Sentry Kurulumu (Ã–rn: frontend iÃ§in)

```bash
npm install @sentry/browser
```

2. BaÅŸlangÄ±Ã§ta Sentry'yi baÅŸlat:

```jsx
import * as Sentry from "@sentry/browser";

Sentry.init({
  dsn: "https://xxx.ingest.sentry.io/yyy", // kendi DSN adresin
});
```

3. Hata yakaladÄ±ÄŸÄ±nda loglama:

```jsx
try {
  // hata Ã§Ä±karabilecek kod
} catch (err) {
  Sentry.captureException(err); // hata Sentry'e gÃ¶nderilir
}
```

Hepsi bu kadar. Sentry `err.message`, `err.stack`, zaman gibi bilgileri otomatik toplar. Ek bilgi de gÃ¶ndermek istersen:

```jsx
Sentry.captureException(err, {
  extra: {
    sayfa: window.location.href,
    kullaniciId: "123", // Ã¶rnek
  }
});
```

---

**ğŸ”¹ 4. KullanÄ±cÄ±ya GÃ¶stermek (Dikkatli olunmalÄ±)**

- KullanÄ±cÄ±ya tÃ¼m hatayÄ± gÃ¶stermek genelde iyi fikir deÄŸildir.
- Ama basit, aÃ§Ä±klayÄ±cÄ± bir mesaj verebilirsin:

```
alert("Bir sorun oluÅŸtu, lÃ¼tfen tekrar deneyin.");
```

---

**ğŸ“Œ Ã–zet**

- **GeliÅŸtirme aÅŸamasÄ±nda** `console.error` kullanÄ±lÄ±r.
- **CanlÄ± uygulamada** hatalar toplanÄ±p sunucuya gÃ¶nderilir.
- **KullanÄ±cÄ±ya sade mesajlar** gÃ¶sterilir, teknik detay verilmez.